{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "bodyPadding": 10,
        "designer|userAlias": "jobform",
        "designer|userClassName": "JobForm",
        "frame": null,
        "height": null,
        "itemId": "jobPanel",
        "title": "Job Details",
        "trackResetOnLoad": true,
        "width": 629
    },
    "name": "MyForm3",
    "designerId": "ab404ff4-4acc-4b7d-80b2-0a233db83bde",
    "viewControllerInstanceId": "d0ec1f85-40be-438d-b2ac-3c1c0321156c",
    "viewModelInstanceId": "6952602a-04e6-4643-b064-270b31dc0ec2",
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "hbox",
                "margin": "10 0 10 0"
            },
            "name": "MyContainer",
            "designerId": "b4ecac04-bdaa-44ea-b1c0-fb71ec36a803",
            "cn": [
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1
                    },
                    "name": "MyContainer1",
                    "designerId": "218b1f37-a743-4f71-9bb0-9fce30c2cd00"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "executeJobBtn",
                        "layout|flex": null,
                        "scale": "large",
                        "text": "Execute Job Now"
                    },
                    "name": "MyButton5",
                    "designerId": "9ec50ca1-5021-4546-bfcb-5f476de8c153",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onExecuteJobBtnClick",
                                "implHandler": [
                                    "this.runLoadedJob();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onExecuteJobBtnClick",
                            "designerId": "d7da290d-e001-4718-ba56-71091f8d9634"
                        }
                    ]
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1
                    },
                    "name": "MyContainer2",
                    "designerId": "d3a33434-3539-4c98-8485-696ff0ce38b4"
                }
            ]
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top"
            },
            "name": "MyToolbar1",
            "designerId": "421936a7-aed2-45b1-8038-93fea6ed52d9",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "saveJobBtn",
                        "layout|flex": null,
                        "text": "<i class=\"fa fa-floppy-o\"></i> Save Job"
                    },
                    "name": "MyButton1",
                    "designerId": "51b052d5-8582-4944-b7e0-e3ea819fdddb",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick4",
                                "implHandler": [
                                    "this.saveJob();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick4",
                            "designerId": "26c276b0-650e-4115-8c13-f6804d833897"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "newJobBtn",
                        "layout|flex": null,
                        "text": "<i class=\"fa fa-plus\"></i> Add New Job"
                    },
                    "name": "MyButton6",
                    "designerId": "959132f6-78c8-405c-9639-0231c3cffb4a",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onButtonClick41",
                                "implHandler": [
                                    "this.addNewJob();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "name": "onButtonClick41",
                            "designerId": "0e3308ba-42ad-49a4-9dea-2cd32195db38"
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Spacer",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1
                    },
                    "name": "MySpacer2",
                    "designerId": "afec88a7-5c3f-443a-b9bc-cf25b584e78d"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "itemId": null,
                "layout": "vbox",
                "title": "Description"
            },
            "name": "MyFieldSet",
            "designerId": "c13067a3-8f94-4b54-b1c9-bfce8e403789",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Name",
                        "labelAlign": "right",
                        "name": "name"
                    },
                    "name": "MyTextField1",
                    "designerId": "8fbddd71-582c-41e8-a9c4-947c923609b1"
                },
                {
                    "type": "Ext.form.field.TextArea",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Description",
                        "labelAlign": "right",
                        "name": "description"
                    },
                    "name": "MyTextArea",
                    "designerId": "aa807449-3b18-4d7c-a669-fe190d2544bc"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "vbox",
                "title": "Source Control"
            },
            "name": "MyFieldSet1",
            "designerId": "4353cc52-b285-48cf-9b21-59344fab1d0b",
            "cn": [
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "displayField": "repoType",
                        "editable": false,
                        "fieldLabel": "Repo Type",
                        "forceSelection": true,
                        "labelAlign": "right",
                        "layout|flex": 1,
                        "maxWidth": 200,
                        "name": "repoType",
                        "queryMode": "local",
                        "store": [
                            "{RepoTypeStore}"
                        ],
                        "valueField": "repoType",
                        "width": null
                    },
                    "name": "MyComboBox",
                    "configAlternates": {
                        "store": "binding"
                    },
                    "designerId": "81f931f5-b9ed-4c90-a134-09e6153a29f8"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Repo Url",
                        "labelAlign": "right",
                        "layout|flex": 1,
                        "margin": null,
                        "name": "repoUrl"
                    },
                    "name": "MyTextField3",
                    "designerId": "362429cf-db6c-4e8e-b239-3be89214ebfb"
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "layout": "hbox",
                        "layout|flex": 1,
                        "margin": "0 0 5 0"
                    },
                    "name": "MyContainer3",
                    "designerId": "00f6becc-03ac-4a7b-85dd-1899e5548071",
                    "cn": [
                        {
                            "type": "Ext.form.field.ComboBox",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "displayField": "cred",
                                "editable": false,
                                "fieldLabel": "Credentials",
                                "forceSelection": true,
                                "labelAlign": "right",
                                "layout|flex": 1,
                                "maxWidth": null,
                                "name": "repoCredentials",
                                "queryMode": "local",
                                "store": [
                                    "{CredStore}"
                                ],
                                "valueField": "cred"
                            },
                            "name": "MyComboBox1",
                            "configAlternates": {
                                "store": "binding"
                            },
                            "designerId": "1009ee85-dea1-4380-a20e-507b65d2fa2c"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "margin": "0 0 0 5",
                                "text": "Edit Creds"
                            },
                            "name": "MyButton4",
                            "designerId": "d8322287-45cf-4ab0-8133-90284c1f1f57",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick",
                                        "implHandler": [
                                            "this.fireEvent('showcredwindow');"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick",
                                    "designerId": "ed580a02-167b-48ec-9498-a302404f48c0"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "vbox",
                "title": "Actions"
            },
            "name": "MyFieldSet4",
            "designerId": "c495e184-7611-48f9-98e6-1c5fe817453f",
            "cn": [
                {
                    "type": "Ext.form.field.TextArea",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Exec",
                        "labelAlign": "right",
                        "name": "exec"
                    },
                    "name": "MyTextArea2",
                    "designerId": "3b141f56-4429-4c6f-a314-4d2fbd4b8bc1"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "vbox",
                "title": "Cron"
            },
            "name": "MyFieldSet2",
            "designerId": "d3e18c44-2dc4-4c01-8d16-0f054cd9654c",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Cron Schedule",
                        "labelAlign": "right",
                        "labelWidth": null,
                        "name": "cron"
                    },
                    "name": "MyTextField4",
                    "designerId": "d27ae24b-f799-4067-b46a-3a32f9041524"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "vbox",
                "title": "Email"
            },
            "name": "MyFieldSet3",
            "designerId": "7a04019a-3bdc-4b5e-a6d1-bf64b79361d7",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "Email",
                        "labelAlign": "right",
                        "labelWidth": null,
                        "name": "email"
                    },
                    "name": "MyTextField2",
                    "designerId": "97c4aec0-7baf-4637-9754-0a65a5be20e5"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "jobName"
                ],
                "fn": "loadJob",
                "implHandler": [
                    "",
                    "this.mask('Loading Job...');",
                    "",
                    "AERP.Ajax.request({",
                    "    url:'/Job/getJob',",
                    "    params:{jobName:jobName},",
                    "    success:function(reply){",
                    "        this.unmask();",
                    "        this.setState('edit');",
                    "        this.getForm().setValues(reply.data);",
                    "        this.currentJob = reply.data.name;",
                    "    },",
                    "    failure:function(){",
                    "        this.unmask();",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "loadJob",
            "designerId": "a653cd4e-fa55-4736-822e-c233723a5193"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "addNewJob",
                "implHandler": [
                    "this.mask(\"Adding New Job...\");",
                    "",
                    "AERP.Ajax.request({",
                    "    url:'/Job/newJob',",
                    "    params:this.getValues(false,false,true,true), //[asString], [dirtyOnly], [includeEmptyText], [useDataValues]",
                    "    success:function(reply){",
                    "        this.unmask();",
                    "        this.loadJob(reply.data.jobName);",
                    "        this.fireEvent('addjob');",
                    "    },",
                    "    failure:function(){",
                    "        this.unmask();",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "addNewJob",
            "designerId": "0e1f976b-f046-4dc3-a891-d7f6fa901f8e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "saveJob",
                "implHandler": [
                    "this.mask('Saving...');",
                    "AERP.Ajax.request({",
                    "    url:'/Job/saveJob',",
                    "    params:{",
                    "        jobName:this.currentJob,",
                    "        jobData:Ext.encode(this.getValues(false,false,true,true)) //[asString], [dirtyOnly], [includeEmptyText], [useDataValues",
                    "    },",
                    "    success:function(reply){",
                    "        this.unmask();",
                    "        this.getForm().setValues(reply.data);",
                    "        this.currentJob = reply.data.name;",
                    "        this.fireEvent('savejob');",
                    "    },",
                    "    failure:function(){",
                    "        this.unmask();",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "saveJob",
            "designerId": "148698c9-dbfe-4d9a-ae82-9789635d54db"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "runLoadedJob",
                "implHandler": [
                    "this.mask('Starting Job...');",
                    "AERP.Ajax.request({",
                    "    url:'/Job/runJob',",
                    "    params:{",
                    "        job:this.currentJob,",
                    "    },",
                    "    success:function(reply){",
                    "        this.unmask();",
                    "    },",
                    "    failure:function(){",
                    "        this.unmask();",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "runLoadedJob",
            "designerId": "7e5b4880-4050-4a1d-876f-7bcfc154c393"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "newState"
                ],
                "fn": "setState",
                "implHandler": [
                    "this.currentState = newState;",
                    "",
                    "this.currentJob = null;",
                    "this.getForm().getFields().each(function(field){",
                    "    field.setValue('');",
                    "    field.resetOriginalValue();",
                    "});",
                    "",
                    "var executeJobBtn = this.queryById('executeJobBtn');",
                    "var newJobBtn = this.queryById('newJobBtn');",
                    "var saveJobBtn = this.queryById('saveJobBtn');",
                    "",
                    "executeJobBtn.disable();",
                    "newJobBtn.hide();",
                    "saveJobBtn.hide();",
                    "",
                    "switch(newState){",
                    "    case 'new':",
                    "        newJobBtn.show();",
                    "        break;",
                    "    case 'edit':",
                    "        executeJobBtn.enable();",
                    "        saveJobBtn.show();",
                    "        break;",
                    "}"
                ]
            },
            "name": "setState",
            "designerId": "66ae136e-b9da-4539-8082-202b0e4936c2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadCreds",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "    url:'/Creds/getAllCreds',",
                    "    success:function(reply){",
                    "        this.lookupViewModel().getStore('CredStore').setData(reply.data);",
                    "    },",
                    "    failure:function(){",
                    "",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "loadCreds",
            "designerId": "10d7bcd6-44b8-4dfe-b3e9-3f5af9bd1436"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onJobPanelRender",
                "implHandler": [
                    "this.loadCreds();"
                ],
                "name": "render",
                "scope": "me"
            },
            "name": "onJobPanelRender",
            "designerId": "f54bdc49-b406-43eb-8523-084a601322c0"
        }
    ]
}