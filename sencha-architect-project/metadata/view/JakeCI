{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "container|align": "stretch",
        "designer|userAlias": "jakeci",
        "designer|userClassName": "JakeCI",
        "height": null,
        "layout": "hbox",
        "title": "JakeCI",
        "width": null
    },
    "name": "MyPanel",
    "designerId": "2d62bcac-e0cf-4ff4-be1e-a6cfe9531784",
    "viewControllerInstanceId": "1b53b1d7-5913-4ac7-998e-515eadea392d",
    "viewModelInstanceId": "8a75c16e-5f5b-4134-80aa-088115286083",
    "cn": [
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "jobQueue"
                ],
                "collapseDirection": "right",
                "collapsible": true,
                "dock": null,
                "headerPosition": "right",
                "hideHeaders": true,
                "layout|flex": null,
                "resizable": true,
                "resizeHandles": "e",
                "store": [
                    "{QueueStore}"
                ],
                "title": "Job Queue",
                "width": 246
            },
            "name": "MyGridPanel2",
            "configAlternates": {
                "store": "binding",
                "resizable": "boolean"
            },
            "designerId": "dcda73ac-798a-4532-ab5b-e92a55ee0868",
            "cn": [
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "job",
                        "flex": 1,
                        "text": "Job"
                    },
                    "name": "MyColumn8",
                    "designerId": "52d01241-cc56-41e0-a4a9-e85745c2b73b"
                },
                {
                    "type": "Ext.view.Table",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "width": 346
                    },
                    "name": "MyTable3",
                    "designerId": "1fda51c8-6e13-4174-bfb4-b1c9af6f78a3"
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "height": 214,
                "itemId": "jobGrid",
                "layout|flex": 1,
                "store": [
                    "{JobStore}"
                ],
                "title": "",
                "width": 400
            },
            "name": "MyGridPanel",
            "configAlternates": {
                "store": "binding"
            },
            "designerId": "0d164643-0f1a-4f51-bfcb-3150d6dd520a",
            "cn": [
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "buildPassing",
                        "menuDisabled": true,
                        "sortable": false,
                        "text": "",
                        "width": 40
                    },
                    "name": "MyColumn6",
                    "designerId": "1509ab9e-714d-4a56-b7c5-9b3b6124c4e2",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "if(value === true){",
                                    "    return '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\" style=\"color:green;\"></i>';",
                                    "}",
                                    "return '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\" style=\"color:red;\"></i>';"
                                ]
                            },
                            "name": "renderer",
                            "designerId": "7f947545-e25d-412b-b1ad-93bd7d375f01"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "name",
                        "text": "Job Name",
                        "width": 193
                    },
                    "name": "MyColumn",
                    "designerId": "41c26bc4-3bc8-43c4-9f92-20b0048e3c21"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "lastBuildLength",
                        "text": "Last Build Time",
                        "width": 249
                    },
                    "name": "MyColumn2",
                    "designerId": "b5188c34-a0c5-4f34-83a2-f036b39b82e0",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return Ext.util.Format.number(value/1000.0,'0.###')+\" sec\";"
                                ]
                            },
                            "name": "renderer",
                            "designerId": "e5122ba7-57c9-48c5-a026-7a29111aca37"
                        }
                    ]
                },
                {
                    "type": "Ext.view.Table",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "name": "MyTable",
                    "designerId": "28348b03-39d6-4448-8361-f9f8e4a3ccb5"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onJobGridRowDblClick",
                        "implHandler": [
                            "this.showJobWindow();",
                            "this.jobWindow.jobForm.loadJob(record.get('name'));",
                            "this.jobWindow.jobHistory.getAllHistory(record.get('name'))"
                        ],
                        "name": "rowdblclick",
                        "scope": "me"
                    },
                    "name": "onJobGridRowDblClick",
                    "designerId": "faa1254a-444d-439d-878b-b6052b58eef0"
                },
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "top"
                    },
                    "name": "MyToolbar",
                    "designerId": "279ec1fc-f1ae-4f12-a4cf-99933eacb6eb",
                    "cn": [
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "cls": null,
                                "icon": null,
                                "iconCls": null,
                                "layout|flex": null,
                                "text": "<i class=\"fa fa-plus-circle\"></i> Add New Job"
                            },
                            "name": "MyButton",
                            "designerId": "f1b54ea2-0396-4bdf-8c2f-4ca75cdf2c2e",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick1",
                                        "implHandler": [
                                            "this.showJobWindow(function(form){",
                                            "    form.docFormNew();",
                                            "});"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick1",
                                    "designerId": "3b0f8a1a-222d-4346-8982-5269b4f6ae3f"
                                }
                            ]
                        },
                        {
                            "type": "Ext.toolbar.Spacer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "name": "MySpacer",
                            "designerId": "67d3ad87-2412-45b1-926e-7c1b7c18f17e"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "text": "<i class=\"fa fa-wrench\"></i> Jake CI Settings"
                            },
                            "name": "MyButton4",
                            "designerId": "398f54b3-0a6d-434c-93b5-19a6a28f7c1b",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onButtonClick3",
                                        "implHandler": [
                                            "this.showSettingsWindow();"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "name": "onButtonClick3",
                                    "designerId": "7d8a5771-9eef-40f8-8b33-2d74b1c15a8f"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getAllJobs",
                "implHandler": [
                    "this.mask(\"Loading Jobs...\");",
                    "",
                    "AERP.Ajax.request({",
                    "    url:'/Job/getAllJobs',",
                    "    success:function(result){",
                    "        this.unmask();",
                    "        this.lookupViewModel().getStore('JobStore').loadData(result.data);",
                    "    },",
                    "    failure:function(){",
                    "        this.unmask();",
                    "    },",
                    "    scope:this",
                    "});"
                ]
            },
            "name": "getAllJobs",
            "designerId": "d5a2b767-d088-4744-808f-947272c97f7a"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onViewportRender",
                "implHandler": [
                    "this.getAllJobs();",
                    "",
                    "",
                    "",
                    "var sThis = this;",
                    "this.resetIdleTimer();",
                    "this.updateJobQueue();",
                    "setInterval(function(){",
                    "    if(!sThis.idle){",
                    "        sThis.updateJobQueue();",
                    "    }",
                    "},5000);"
                ],
                "name": "render",
                "scope": "me"
            },
            "name": "onViewportRender",
            "designerId": "00e4552f-ac00-4d6d-8d57-6e38d95ae141"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "firstFunction"
                ],
                "fn": "showJobWindow",
                "implHandler": [
                    "if(!firstFunction){",
                    "    firstFunction = function(){};",
                    "}",
                    "",
                    "if(!this.jobWindow){",
                    "    var form = Ext.create('widget.jobform',{",
                    "        listeners:{",
                    "            scope:this,",
                    "            docforminitcomplete:function(docForm){",
                    "                firstFunction(docForm);",
                    "            },",
                    "            addjob:function(){",
                    "                this.getAllJobs();",
                    "            },",
                    "            savejob:function(){",
                    "                this.getAllJobs();",
                    "            },",
                    "            showcredwindow:function(){",
                    "                this.showCredWindow();",
                    "            }",
                    "        }",
                    "    });",
                    "    var history = Ext.create('widget.jobhistory',{});",
                    "    this.jobWindow = Ext.create('Ext.window.Window', {",
                    "        resizable: false,",
                    "        layout: 'fit',",
                    "        closeAction: 'hide',",
                    "        title: 'Job Editor',",
                    "        items:  Ext.create('Ext.tab.Panel',{",
                    "            items: [form,history]",
                    "        }),",
                    "        liveDrag:true,",
                    "        listeners:{",
                    "            beforeclose: form.docFormWindowBeforeClose",
                    "        }",
                    "    });",
                    "    this.jobWindow.docForm = form;",
                    "}else{",
                    "    firstFunction(this.jobWindow.docForm);",
                    "}",
                    "this.jobWindow.show();",
                    "this.jobWindow.focus();"
                ]
            },
            "name": "showJobWindow",
            "designerId": "5f61b628-2479-43fb-b1a3-60216dd1103c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showCredWindow",
                "implHandler": [
                    "if(!this.credWindow){",
                    "    var grid = Ext.create('widget.credseditor',{",
                    "        listeners:{",
                    "            scope:this,",
                    "        }",
                    "    });",
                    "",
                    "",
                    "    this.credWindow = Ext.create('Ext.window.Window', {",
                    "        resizable: true,",
                    "        layout: 'fit',",
                    "        closeAction: 'hide',",
                    "        title: 'Saved Credentials',",
                    "        liveDrag:true,",
                    "        items: grid",
                    "    });",
                    "    this.credWindow.credGrid = grid;",
                    "}",
                    "this.credWindow.show();"
                ]
            },
            "name": "showCredWindow",
            "designerId": "94aea55a-2722-432d-b1e4-c4e045ad2a86"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showSettingsWindow",
                "implHandler": [
                    "if(!this.settingsWindow){",
                    "    var panel = Ext.create('widget.settings',{",
                    "        listeners:{",
                    "            scope:this,",
                    "            showcredwindow:function(){",
                    "                this.showCredWindow();",
                    "            }",
                    "        }",
                    "    });",
                    "",
                    "",
                    "    this.settingsWindow = Ext.create('Ext.window.Window', {",
                    "        resizable: true,",
                    "        layout: 'fit',",
                    "        closeAction: 'hide',",
                    "        title: 'Settings',",
                    "        liveDrag:true,",
                    "        items: panel",
                    "    });",
                    "    this.settingsWindow.settingsPanel = panel;",
                    "}",
                    "this.settingsWindow.show();"
                ]
            },
            "name": "showSettingsWindow",
            "designerId": "9dfac99d-af4f-4d21-af0e-8ed0584d73a3"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "resetIdleTimer",
                "implHandler": [
                    "var sThis = this;",
                    "this.idle = false;",
                    "clearTimeout(this.idleTimeout);",
                    "this.idleTimeout = setTimeout(function(){",
                    "    sThis.idle = true;",
                    "},30000); //If you don't do anything for 30 seconds, stop updating the screen."
                ]
            },
            "name": "resetIdleTimer",
            "designerId": "c43e2257-8aff-4555-96fd-c8e3fe6536fa"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateJobQueue",
                "implHandler": [
                    "AERP.Ajax.request({",
                    "    url:'/Job/getJobQueue',",
                    "    success:function(reply){",
                    "        this.lookupViewModel().getStore('QueueStore').loadData(reply.data);",
                    "    },",
                    "    scope:this",
                    "})"
                ]
            },
            "name": "updateJobQueue",
            "designerId": "e37831ef-8482-477a-a674-a03535367123"
        }
    ]
}